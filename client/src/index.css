/* Replay button style from Uiverse.io by Cevorob */
/* Chalk-like font import for end screen */
@import url('https://fonts.googleapis.com/css2?family=Schoolbell&display=swap');
.replay-btn {
  position: relative;
  height: 50px;
  padding: 0 30px;
  border: 2px solid #000;
  background: #e8e8e8;
  user-select: none;
  white-space: nowrap;
  transition: all 0.05s linear;
  font-family: inherit;
}
.replay-btn::before,
.replay-btn::after {
  content: '';
  position: absolute;
  background: #e8e8e8;
  transition: all 0.2s linear;
}
.replay-btn::before {
  width: calc(100% + 6px);
  height: calc(100% - 16px);
  top: 8px;
  left: -3px;
}
.replay-btn::after {
  width: calc(100% - 16px);
  height: calc(100% + 6px);
  top: -3px;
  left: 8px;
}
.replay-btn:hover {
  cursor: crosshair;
}
.replay-btn:active {
  transform: scale(0.95);
}
.replay-btn:hover::before {
  height: calc(100% - 32px);
  top: 16px;
}
.replay-btn:hover::after {
  width: calc(100% - 32px);
  left: 16px;
}
.replay-btn > span {
  font-size: 15px;
  z-index: 3;
  position: relative;
  font-weight: 600;
}
/* Chalkboard end screen styles */
.chalkboard-frame {
  width: min(90vw, 680px);
  padding: 14px;
  border-radius: 18px;
  box-shadow:
    0 12px 34px rgba(0, 0, 0, 0.35),
    inset 0 0 0 1px rgba(255, 255, 255, 0.05);
  background: #4b2f1b;
  border: 18px solid transparent;
  background-image:
    linear-gradient(#4b2f1b, #4b2f1b),
    url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12"><defs><linearGradient id="g" x1="0" x2="0" y1="0" y2="1"><stop offset="0" stop-color="%235a3a22"/><stop offset="1" stop-color="%23432a18"/></linearGradient></defs><rect width="12" height="12" fill="url(%23g)"/><path d="M0 6h12" stroke="%236e4a2f" stroke-width="0.6" opacity="0.35"/></svg>');
  background-origin: padding-box, border-box;
  background-clip: padding-box, border-box;
}
.chalkboard-surface {
  border-radius: 14px;
  padding: 22px 24px;
  background:
    radial-gradient(140px 140px at 22% 28%, rgba(255, 255, 255, 0.08), transparent 70%),
    radial-gradient(200px 200px at 78% 68%, rgba(255, 255, 255, 0.05), transparent 70%),
    linear-gradient(180deg, #1e4a35 0%, #285f41 100%);
  box-shadow:
    inset 0 0 42px rgba(0, 0, 0, 0.45),
    inset 0 0 3px rgba(255, 255, 255, 0.05);
  position: relative;
}
.chalkboard-surface::after {
  content: '';
  position: absolute;
  inset: 0;
  background:
    radial-gradient(60px 60px at 30% 40%, rgba(255, 255, 255, 0.06), transparent 70%),
    radial-gradient(50px 50px at 65% 55%, rgba(255, 255, 255, 0.05), transparent 70%),
    radial-gradient(100px 100px at 15% 85%, rgba(255, 255, 255, 0.04), transparent 70%);
  pointer-events: none;
}
.chalk-text {
  color: #fafafa;
  font-family: 'Schoolbell', cursive, system-ui;
  text-shadow:
    0 1px 0 rgba(255, 255, 255, 0.25),
    0 0 3px rgba(255, 255, 255, 0.22);
  filter: saturate(0.95) contrast(0.92);
}
.chalk-divider {
  height: 1px;
  background: rgba(255, 255, 255, 0.35);
  box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2);
}
/* Variant: slightly different color for Quit */
.replay-btn.replay-btn--danger {
  background: #fbe9e9;
  border-color: #7f1d1d;
}
.replay-btn.replay-btn--danger::before,
.replay-btn.replay-btn--danger::after {
  background: #fbe9e9;
}
@tailwind base;
@tailwind components;
@tailwind utilities;

@keyframes tutorialIn {
  0% {
    opacity: 0;
    transform: translate3d(0, 14px, 0);
  }
  100% {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
}

/* Café-themed animated background (scoped utility) */
@property --a {
  syntax: '<angle>';
  inherits: true;
  initial-value: 0deg;
}
@property --p {
  syntax: '<percentage>';
  inherits: true;
  initial-value: 0%;
}
@property --c1 {
  syntax: '<color>';
  inherits: true;
  initial-value: #000;
}
@property --c2 {
  syntax: '<color>';
  inherits: true;
  initial-value: #000;
}

.cafe-animated-bg {
  position: relative;
  overflow: hidden;
}

.cafe-animated-bg::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  --s: 78px;
  --_g: #0000, var(--c1) 2deg calc(var(--a) - 2deg), #0000 var(--a);
  background:
    conic-gradient(from calc(-45deg - var(--a) / 2) at top var(--p) left var(--p), var(--_g)),
    conic-gradient(from calc(-45deg - var(--a) / 2) at top var(--p) left var(--p), var(--_g)),
    conic-gradient(from calc(45deg - var(--a) / 2) at top var(--p) right var(--p), var(--_g)),
    conic-gradient(from calc(45deg - var(--a) / 2) at top var(--p) right var(--p), var(--_g)),
    conic-gradient(from calc(-135deg - var(--a) / 2) at bottom var(--p) left var(--p), var(--_g)),
    conic-gradient(from calc(-135deg - var(--a) / 2) at bottom var(--p) left var(--p), var(--_g)),
    conic-gradient(from calc(135deg - var(--a) / 2) at bottom var(--p) right var(--p), var(--_g)),
    conic-gradient(from calc(135deg - var(--a) / 2) at bottom var(--p) right var(--p), var(--_g))
      var(--c2);
  background-size: calc(2 * var(--s)) calc(2 * var(--s));
  animation: cafePattern 2.8s infinite alternate linear;
  opacity: 0.22;
  filter: saturate(1.05) contrast(1.02);
}

/* Subtle dark glaze for readability */
.cafe-animated-bg::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: linear-gradient(180deg, rgba(0, 0, 0, 0.38), rgba(0, 0, 0, 0.55));
  pointer-events: none;
}

.cafe-animated-bg > * {
  position: relative;
  z-index: 1;
}

@keyframes cafePattern {
  0%,
  15% {
    --a: 135deg;
    --p: 20%;
    /* felt dark */
    --c1: #15652e;
    /* wood light / saffron */
    --c2: #b08968;
    background-position:
      0 0,
      var(--s) var(--s);
  }
  45%,
  50% {
    --a: 90deg;
    --p: 25%;
    --c1: #15652e;
    --c2: #c8a04b;
    background-position:
      0 0,
      var(--s) var(--s);
  }
  50.01%,
  55% {
    --a: 90deg;
    --p: 25%;
    --c2: #15652e;
    --c1: #c8a04b;
    background-position:
      var(--s) 0,
      0 var(--s);
  }
  85%,
  100% {
    --a: 135deg;
    --p: 20%;
    --c2: #15652e;
    --c1: #b08968;
    background-position:
      var(--s) 0,
      0 var(--s);
  }
}

@media (prefers-reduced-motion: reduce) {
  .cafe-animated-bg::before {
    animation: none;
  }
}

html,
body,
#root {
  height: 100%;
}

/* Hide scrollbars (keep scroll functionality) */
.no-scrollbar {
  -ms-overflow-style: none; /* IE/Edge legacy */
  scrollbar-width: none; /* Firefox */
}
.no-scrollbar::-webkit-scrollbar {
  display: none; /* Chrome/Safari */
}

/* Tunisian café vibe base */
body {
  @apply bg-tableWood bg-woodGrain text-[#2b241f];

  /* Café scrollbar theme (shared vars) */
  --sb-track-color: #6b4f2f; /* tableWood.dark */
  --sb-thumb-color: #15652e; /* felt.dark */
  --sb-thumb-hover-color: #1f8f40; /* felt.bright */
  --sb-size: 11px;
}

/* Scrollbar styling (applies to scroll containers, not just body) */
* {
  scrollbar-color: var(--sb-thumb-color) var(--sb-track-color);
  scrollbar-width: thin;
}

*::-webkit-scrollbar {
  width: var(--sb-size);
  height: var(--sb-size);
}

*::-webkit-scrollbar-track {
  background: var(--sb-track-color);
  border-radius: 999px;
}

*::-webkit-scrollbar-thumb {
  background: var(--sb-thumb-color);
  border-radius: 999px;
  border: 2px solid var(--sb-track-color);
}

*::-webkit-scrollbar-thumb:hover {
  background: var(--sb-thumb-hover-color);
}

@supports not selector(::-webkit-scrollbar) {
  body {
    scrollbar-color: var(--sb-thumb-color) var(--sb-track-color);
  }
}

.cafe-header {
  @apply w-full bg-tableWood-dark/95 backdrop-blur-sm shadow-caféGlow;
  background-image: var(--tw-bg-cafeWall);
}

.table-felt {
  /* Inner felt surface */
  @apply bg-felt rounded-mat shadow-insetDeep;
  /* Use a layered background trick to paint the border with wood texture */
  border: 16px solid transparent; /* frame thickness */
  background-image:
    url('/assets/props/mat.png'),
    /* inner felt image */ url('/assets/props/wood.png'); /* outer wood texture for the frame */
  background-origin: padding-box, border-box;
  background-clip: padding-box, border-box;
  background-repeat: no-repeat, round;
  background-size: cover, 220px; /* adjust 2nd value to scale wood grain */
  background-position: center, center;
  /* Prevent the Tailwind felt background-color from painting into the border */
  background-color: transparent;
}

/* Patterned background for the table container using tableWood tone */
.table-container {
  background-color: #8b6b4a; /* tableWood */
  background-image:
    radial-gradient(20px 20px at 25% 25%, rgba(255, 255, 255, 0.06) 0 40%, transparent 42%),
    radial-gradient(18px 18px at 75% 65%, rgba(0, 0, 0, 0.08) 0 40%, transparent 42%),
    repeating-linear-gradient(45deg, rgba(255, 255, 255, 0.04) 0 2px, transparent 2px 18px),
    repeating-linear-gradient(-45deg, rgba(0, 0, 0, 0.05) 0 2px, transparent 2px 18px);
  background-blend-mode: overlay, overlay, normal, normal;
}

/* Dealing animation: slide up + fade in */
@keyframes deal {
  0% {
    transform: translateY(12px) scale(0.95);
    opacity: 0;
  }
  60% {
    transform: translateY(-2px) scale(1.02);
    opacity: 1;
  }
  100% {
    transform: translateY(0) scale(1);
    opacity: 1;
  }
}

/* Smooth flow-in animations from center/deck towards each seat */
@keyframes dealInBottom {
  0% {
    transform: translateY(40px) scale(0.96);
    opacity: 0;
  }
  70% {
    transform: translateY(-4px) scale(1.02);
    opacity: 1;
  }
  100% {
    transform: translateY(0) scale(1);
    opacity: 1;
  }
}
@keyframes dealInTop {
  0% {
    transform: translateY(-40px) scale(0.96);
    opacity: 0;
  }
  70% {
    transform: translateY(4px) scale(1.02);
    opacity: 1;
  }
  100% {
    transform: translateY(0) scale(1);
    opacity: 1;
  }
}
@keyframes dealInLeft {
  0% {
    transform: translateX(-40px) scale(0.96);
    opacity: 0;
  }
  70% {
    transform: translateX(2px) scale(1.02);
    opacity: 1;
  }
  100% {
    transform: translateX(0) scale(1);
    opacity: 1;
  }
}
@keyframes dealInRight {
  0% {
    transform: translateX(40px) scale(0.96);
    opacity: 0;
  }
  70% {
    transform: translateX(-2px) scale(1.02);
    opacity: 1;
  }
  100% {
    transform: translateX(0) scale(1);
    opacity: 1;
  }
}

/* Gentle shake while holding the chicha */
@keyframes chichaHoldShake {
  0% {
    transform: translate3d(0px, 0px, 0) rotate(-0.6deg);
  }
  50% {
    transform: translate3d(0.6px, -0.4px, 0) rotate(0.6deg);
  }
  100% {
    transform: translate3d(-0.4px, 0.2px, 0) rotate(-0.2deg);
  }
}

.chicha-hold-shake {
  animation: chichaHoldShake 160ms ease-in-out infinite;
  transform-origin: 50% 85%;
  will-change: transform;
}

@media (prefers-reduced-motion: reduce) {
  .chicha-hold-shake {
    animation: none !important;
  }
}

.deal-in-bottom {
  animation: dealInBottom 450ms cubic-bezier(0.22, 1, 0.36, 1) both;
  will-change: transform, opacity;
}
.deal-in-top {
  animation: dealInTop 450ms cubic-bezier(0.22, 1, 0.36, 1) both;
  will-change: transform, opacity;
}
.deal-in-left {
  animation: dealInLeft 450ms cubic-bezier(0.22, 1, 0.36, 1) both;
  will-change: transform, opacity;
}
.deal-in-right {
  animation: dealInRight 450ms cubic-bezier(0.22, 1, 0.36, 1) both;
  will-change: transform, opacity;
}

/* From Uiverse.io by nikk7007 — Header button baseline */
.btn {
  --color: #00a97f; /* default mint */
  --color2: rgb(10, 25, 30);
  padding: 0.8em 1.75em;
  background-color: transparent;
  border-radius: 6px;
  border: 0.3px solid var(--color);
  transition: 0.5s;
  position: relative;
  overflow: hidden;
  cursor: pointer;
  z-index: 1;
  font-weight: 500;
  font-size: clamp(12px, 1.8vw, 16px);
  font-family: 'Roboto', 'Segoe UI', sans-serif;
  text-transform: uppercase;
  color: var(--color);
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
}

.btn::after,
.btn::before {
  content: '';
  display: block;
  height: 100%;
  width: 100%;
  transform: skew(90deg) translate(-50%, -50%);
  position: absolute;
  inset: 50%;
  left: 25%;
  z-index: -1;
  transition: 0.5s ease-out;
  background-color: var(--color);
}

.btn::before {
  top: -50%;
  left: -25%;
  transform: skew(90deg) rotate(180deg) translate(-50%, -50%);
}

.btn:hover::before {
  transform: skew(45deg) rotate(180deg) translate(-50%, -50%);
}

.btn:hover::after {
  transform: skew(45deg) translate(-50%, -50%);
}

.btn:hover {
  color: var(--color2);
}

.btn:active {
  filter: brightness(0.9);
  transform: scale(0.98);
}

/* Small screens: slightly tighter padding */
@media (max-width: 640px) {
  .btn {
    padding: 0.6em 1.1em;
    gap: 0.4rem;
  }
}

/* Arabian theme variants */
.btn.btn--mint {
  --color: #00a97f; /* mint/emerald */
  --color2: #0a191e;
}

.btn.btn--azure {
  --color: #1e6de3; /* azure/royal blue */
  --color2: #0a1624;
}

.btn.btn--desert {
  --color: #c8a04b; /* desert gold / saffron */
  --color2: #1e1510;
}

/* Header-specific sizing: align buttons with Room code input height */
.cafe-header .btn {
  padding: 0.5em 1.1em; /* reduce vertical padding */
  font-size: 14px;
  line-height: 1;
}

@media (max-width: 640px) {
  .cafe-header .btn {
    padding: 0.45em 1em;
    font-size: 13px;
  }
}

/* Room code input (scoped) */
.room-input .group {
  position: relative;
}

.room-input .input {
  font-size: 14px;
  padding: 8px 10px 8px 5px; /* keep compact height */
  display: block;
  width: 200px;
  border: none;
  border-bottom: 1px solid #515151;
  background: transparent;
  color: #f1f1f1; /* readable on dark header */
}

.room-input .input:focus {
  outline: none;
}

.room-input label {
  color: #d1d5db; /* light gray */
  font-size: 16px;
  font-weight: normal;
  position: absolute;
  pointer-events: none;
  left: 5px;
  top: 8px;
  transition: 0.2s ease all;
}

.room-input .input:focus ~ label,
.room-input .input:valid ~ label {
  top: -16px;
  font-size: 12px;
  color: #c8a04b; /* desert accent */
}

.room-input .bar {
  position: relative;
  display: block;
  width: 200px;
}

.room-input .bar:before,
.room-input .bar:after {
  content: '';
  height: 2px;
  width: 0;
  bottom: 1px;
  position: absolute;
  background: #c8a04b; /* accent */
  transition: 0.2s ease all;
}

.room-input .bar:before {
  left: 50%;
}

.room-input .bar:after {
  right: 50%;
}

.room-input .input:focus ~ .bar:before,
.room-input .input:focus ~ .bar:after {
  width: 50%;
}

.room-input .highlight {
  position: absolute;
  height: 60%;
  width: 100px;
  top: 25%;
  left: 0;
  pointer-events: none;
  opacity: 0.4;
}

.room-input .input:focus ~ .highlight {
  animation: roomInputHighlighter 0.3s ease;
}

@keyframes roomInputHighlighter {
  from {
    background: #c8a04b;
  }
  to {
    width: 0;
    background: transparent;
  }
}
